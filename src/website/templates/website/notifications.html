{% extends 'website/base.html' %}

{% block title %}Notifications - My Neighbourhood{% endblock %}

{% block content %}
<h2>Notifications</h2>

{% if notifications %}
    {% for notification in notifications %}
    <div class="notification-item" id="notification-{{ notification.id }}"{% if notification.is_read %} style="border: 2px solid #6c757d;"{% else %} style="border-left: 4px solid #007bff;"{% endif %}>
        <div class="notification-content">
            <div class="timestamp">
                {{ notification.created_at|date:"F j, Y, g:i a" }}
            </div>
            <p>{{ notification.message }}</p>
            <div class="notification-actions">
                <a href="{% url 'user_profile' notification.post.author.id %}" class="btn btn-primary">View Post</a>
                {% if not notification.is_read %}
                    <form method="post" action="{% url 'mark_notification_read' notification.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-success mark-read-btn">
                            Mark as Read
                        </button>
                    </form>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <p>No notifications yet. Follow other users to get notified when they post!</p>
{% endif %}

<div style="margin-top: 20px;">
    <a href="{% url 'home' %}" class="btn btn-primary">Back to Home</a>
</div>

<style>
.notification-item {
    position: relative;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    border-radius: 8px;
    background: white;
}

.notification-actions {
    margin-top: 10px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.mark-read-btn {
    transition: all 0.3s ease;
}

.mark-read-btn:hover {
    transform: translateY(-1px);
}
</style>
{% endblock %} 